<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ğŸŒ¿ Huios</title>
<style>
  body {
    font-family: "Noto Sans KR", sans-serif;
    background: #f7f7f7;
    margin: 0;
    padding: 0;
  }
  header {
    background: #4a7c59;
    color: white;
    text-align: center;
    padding: 1rem;
  }
  nav {
    display: flex;
    background: #6ca47c;
    justify-content: space-around;
  }
  .tab {
    padding: 1rem;
    color: white;
    cursor: pointer;
  }
  .tab.active {
    background: #4a7c59;
    font-weight: bold;
  }
  .view {
    display: none;
    padding: 1rem;
  }
  .view.active {
    display: block;
  }
  .section {
    background: white;
    margin: 1rem 0;
    padding: 1rem;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  textarea, input, select {
    width: 100%;
    padding: 0.7rem;
    margin: 0.4rem 0;
  }
  button {
    background: #4a7c59;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 0.6rem 1rem;
    cursor: pointer;
  }
  button:hover { background: #3f664c; }
  .item {
    background: #f1f1f1;
    padding: 0.5rem;
    margin-top: 0.3rem;
    border-radius: 6px;
  }
  .delete-btn {
    background: #d9534f;
    color: white;
    border: none;
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    cursor: pointer;
  }
  .delete-btn:hover { background: #b94441; }
  .response {
    margin-top: 0.4rem;
    font-size: 0.9em;
    color: #333;
  }
</style>
</head>
<body>
<header><h1>ğŸŒ¿ Huios</h1></header>

<nav>
  <div class="tab active" data-tab="verse">ì˜¤ëŠ˜ì˜ ë§ì”€</div>
  <div class="tab" data-tab="bible">ì„±ê²½ íƒìƒ‰</div>
  <div class="tab" data-tab="meditation">ë¬µìƒ</div>
  <div class="tab" data-tab="prayer">ê¸°ë„</div>
  <div class="tab" data-tab="thanks">ê°ì‚¬</div>
  <div class="tab" data-tab="favorites">ì¦ê²¨ì°¾ê¸°</div>
</nav>

<!-- ğŸ“– ì˜¤ëŠ˜ì˜ ë§ì”€ -->
<div id="verse" class="view active">
  <div class="section">
    <h2>ğŸ“– ì˜¤ëŠ˜ì˜ ë§ì”€</h2>
    <p id="verseText">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    <button id="newVerseBtn">ìƒˆ ë§ì”€ ë³´ê¸°</button>
    <button id="saveFavoriteBtn">ì¦ê²¨ì°¾ê¸° ì¶”ê°€</button>
  </div>
</div>

<!-- ğŸ“š ì„±ê²½ íƒìƒ‰ -->
<div id="bible" class="view">
  <div class="section">
    <h2>ğŸ“š ì„±ê²½ íƒìƒ‰</h2>
    <label>ì±… ì„ íƒ:</label>
    <select id="bookSelect"></select>
    <label>ì¥ ì„ íƒ:</label>
    <select id="chapterSelect"></select>
    <label>ì ˆ ì„ íƒ:</label>
    <select id="verseSelect"></select>
    <div style="display:flex;gap:5px;flex-wrap:wrap;">
      <button id="prevChapterBtn">â—€ ì´ì „ ì¥</button>
      <button id="showVerseBtn">ì„ íƒ ì ˆ ë³´ê¸°</button>
      <button id="showChapterBtn">ì¥ ì „ì²´ ë³´ê¸°</button>
      <button id="nextChapterBtn">ë‹¤ìŒ ì¥ â–¶</button>
    </div>
    <div id="bibleResult" style="margin-top:10px;"></div>
  </div>
</div>

<!-- ğŸ•Š ë¬µìƒ -->
<div id="meditation" class="view">
  <div class="section">
    <h2>ğŸ•Š ë¬µìƒ ê¸°ë¡</h2>
    <input id="meditationVerse" placeholder="ë¬µìƒí•œ ë§ì”€ (ì˜ˆ: ìš”í•œë³µìŒ 3:16)" />
    <textarea id="meditationInput" placeholder="ì˜¤ëŠ˜ì˜ ë¬µìƒì„ ê¸°ë¡í•˜ì„¸ìš”..."></textarea>
    <button id="saveMeditation">ì €ì¥</button>
    <div id="meditationList"></div>
  </div>
</div>

<!-- ğŸ™ ê¸°ë„ -->
<div id="prayer" class="view">
  <div class="section">
    <h2>ğŸ™ ê¸°ë„ ì œëª©</h2>
    <textarea id="prayerInput" placeholder="ê¸°ë„ ì œëª©ì„ ì ìœ¼ì„¸ìš”..."></textarea>
    <button id="savePrayer">ì €ì¥</button>
    <div id="prayerList"></div>
  </div>
</div>

<!-- ğŸ’– ê°ì‚¬ -->
<div id="thanks" class="view">
  <div class="section">
    <h2>ğŸ’– ê°ì‚¬ ì œëª©</h2>
    <textarea id="thanksInput" placeholder="ê°ì‚¬í•œ ì¼ì„ ì ìœ¼ì„¸ìš”..."></textarea>
    <button id="saveThanks">ì €ì¥</button>
    <div id="thanksList"></div>
  </div>
</div>

<!-- â­ ì¦ê²¨ì°¾ê¸° -->
<div id="favorites" class="view">
  <div class="section">
    <h2>â­ ì¦ê²¨ì°¾ê¸° ë§ì”€</h2>
    <div id="favoritesContainer"></div>
  </div>
</div>

<script>
/* íƒ­ ì „í™˜ */
const tabs=document.querySelectorAll(".tab");
const views=document.querySelectorAll(".view");
tabs.forEach(tab=>tab.addEventListener("click",()=>{
  tabs.forEach(t=>t.classList.remove("active"));
  tab.classList.add("active");
  views.forEach(v=>v.classList.remove("active"));
  document.getElementById(tab.dataset.tab).classList.add("active");
}));

/* ì €ì¥ */
const StorageKey="faith_app_full_v3";
function loadState(){return JSON.parse(localStorage.getItem(StorageKey))||{meditations:[],prayers:[],thanks:[],favorites:[]};}
function saveState(s){localStorage.setItem(StorageKey,JSON.stringify(s));}

/* ì„±ê²½ ë°ì´í„° */
const API_BASE="https://bible-api.com/";
const chapterCounts={Genesis:50,Exodus:40,Leviticus:27,Numbers:36,Deuteronomy:34,Joshua:24,Judges:21,Ruth:4,"1 Samuel":31,"2 Samuel":24,"1 Kings":22,"2 Kings":25,"1 Chronicles":29,"2 Chronicles":36,Ezra:10,Nehemiah:13,Esther:10,Job:42,Psalms:150,Proverbs:31,Ecclesiastes:12,"Song of Solomon":8,Isaiah:66,Jeremiah:52,Lamentations:5,Ezekiel:48,Daniel:12,Hosea:14,Joel:3,Amos:9,Obadiah:1,Jonah:4,Micah:7,Nahum:3,Habakkuk:3,Zephaniah:3,Haggai:2,Zechariah:14,Malachi:4,Matthew:28,Mark:16,Luke:24,John:21,Acts:28,Romans:16,"1 Corinthians":16,"2 Corinthians":13,Galatians:6,Ephesians:6,Philippians:4,Colossians:4,"1 Thessalonians":5,"2 Thessalonians":3,"1 Timothy":6,"2 Timothy":4,Titus:3,Philemon:1,Hebrews:13,James:5,"1 Peter":5,"2 Peter":3,"1 John":5,"2 John":1,"3 John":1,Jude:1,Revelation:22};
const booksList=Object.keys(chapterCounts);

/* ì˜¤ëŠ˜ì˜ ë§ì”€ */
const verseText=document.getElementById("verseText");
async function fetchVerse(b,c,v){const res=await fetch(`${API_BASE}${encodeURIComponent(b)}+${c}:${v}?translation=web`);const data=await res.json();return data.text?`${b} ${c}:${v} â€” ${data.text.trim()}`:null;}
async function showRandomVerse(){verseText.textContent="ğŸ“– ë§ì”€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...";const b=booksList[Math.floor(Math.random()*booksList.length)];const c=Math.floor(Math.random()*chapterCounts[b])+1;const v=Math.floor(Math.random()*20)+1;const r=await fetchVerse(b,c,v);verseText.textContent=r||"ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.";}
document.getElementById("newVerseBtn").onclick=showRandomVerse;showRandomVerse();

/* ì¦ê²¨ì°¾ê¸° */
function renderFavorites(){const s=loadState();const c=document.getElementById("favoritesContainer");c.innerHTML="";s.favorites.forEach((v,i)=>{const d=document.createElement("div");d.className="item";d.innerHTML=`<span>${v}</span><button class="delete-btn">ì‚­ì œ</button>`;d.querySelector(".delete-btn").onclick=()=>{s.favorites.splice(i,1);saveState(s);renderFavorites();};c.appendChild(d);});}
document.getElementById("saveFavoriteBtn").onclick=()=>{const s=loadState();const v=verseText.textContent.trim();if(v&&!s.favorites.includes(v)){s.favorites.push(v);saveState(s);renderFavorites();}};renderFavorites();

/* ì„±ê²½ íƒìƒ‰ */
const bookSelect=document.getElementById("bookSelect"),chapterSelect=document.getElementById("chapterSelect"),verseSelect=document.getElementById("verseSelect");
booksList.forEach(b=>{const o=document.createElement("option");o.value=b;o.textContent=b;bookSelect.appendChild(o);});
bookSelect.onchange=()=>{chapterSelect.innerHTML="";const max=chapterCounts[bookSelect.value];for(let i=1;i<=max;i++){const o=document.createElement("option");o.value=i;o.textContent=`${i}ì¥`;chapterSelect.appendChild(o);}chapterSelect.dispatchEvent(new Event("change"));};
chapterSelect.onchange=async()=>{verseSelect.innerHTML="";const b=bookSelect.value,c=chapterSelect.value;const res=await fetch(`${API_BASE}${encodeURIComponent(b)}+${c}?translation=web`);const data=await res.json();const total=data.verses?data.verses.length:50;for(let i=1;i<=total;i++){const o=document.createElement("option");o.value=i;o.textContent=`${i}ì ˆ`;verseSelect.appendChild(o);}};
async function showVerse(){const b=bookSelect.value,c=chapterSelect.value,v=verseSelect.value;const res=await fetch(`${API_BASE}${encodeURIComponent(b)}+${c}:${v}?translation=web`);const data=await res.json();document.getElementById("bibleResult").innerHTML=data.text?`<div class="card">${b} ${c}:${v} â€” ${data.text}</div>`:"ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨";}
async function showChapter(){const b=bookSelect.value,c=chapterSelect.value;const res=await fetch(`${API_BASE}${encodeURIComponent(b)}+${c}?translation=web`);const data=await res.json();document.getElementById("bibleResult").innerHTML=data.verses?`<h3>${b} ${c}ì¥</h3>`+data.verses.map(v=>`<div class="card"><b>${v.verse}ì ˆ</b> ${v.text}</div>`).join(""):"ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨";}
document.getElementById("showVerseBtn").onclick=showVerse;
document.getElementById("showChapterBtn").onclick=showChapter;
document.getElementById("prevChapterBtn").onclick=()=>{let c=parseInt(chapterSelect.value);if(c>1){chapterSelect.value=c-1;chapterSelect.dispatchEvent(new Event("change"));showChapter();}};
document.getElementById("nextChapterBtn").onclick=()=>{let c=parseInt(chapterSelect.value);const max=chapterCounts[bookSelect.value];if(c<max){chapterSelect.value=c+1;chapterSelect.dispatchEvent(new Event("change"));showChapter();}};
bookSelect.value="John";bookSelect.dispatchEvent(new Event("change"));

/* ë¬µìƒ/ê¸°ë„/ê°ì‚¬ */
function renderList(id,arr,key){const c=document.getElementById(id);c.innerHTML="";arr.forEach((t,i)=>{const d=document.createElement("div");d.className="item";
if(key==="prayers"){
  d.innerHTML=`<div><b>${t.title}</b><div class='response'>${t.answered?"âœ… ì‘ë‹µë¨: "+t.response:"â³ ì‘ë‹µ ëŒ€ê¸°ì¤‘"}</div></div>
  <button class='delete-btn'>ì‚­ì œ</button>`;
}else{
  d.innerHTML=`<span>${t}</span><button class='delete-btn'>ì‚­ì œ</button>`;
}
d.querySelector(".delete-btn").onclick=()=>{const s=loadState();s[key].splice(i,1);saveState(s);renderList(id,s[key],key);};
if(key==="prayers"&&!t.answered){
  const check=document.createElement("button");
  check.textContent="ì‘ë‹µë¨ âœ”ï¸";
  check.style.marginLeft="5px";
  check.onclick=()=>{
    const response=prompt("ì‘ë‹µ ë‚´ìš©(ì–´ë–»ê²Œ ì‘ë‹µë˜ì—ˆëŠ”ì§€)ì„ ì…ë ¥í•˜ì„¸ìš”:");
    if(response){const s=loadState();s.prayers[i].answered=true;s.prayers[i].response=response;saveState(s);renderList(id,s.prayers,"prayers");}
  };
  d.appendChild(check);
}
c.appendChild(d);});}
const s=loadState();
renderList("meditationList",s.meditations,"meditations");
renderList("prayerList",s.prayers,"prayers");
renderList("thanksList",s.thanks,"thanks");

document.getElementById("saveMeditation").onclick=()=>{const verse=document.getElementById("meditationVerse").value.trim();const val=document.getElementById("meditationInput").value.trim();if(val){const s=loadState();s.meditations.push(verse?`${verse} â€” ${val}`:val);saveState(s);renderList("meditationList",s.meditations,"meditations");document.getElementById("meditationInput").value="";document.getElementById("meditationVerse").value="";}};
document.getElementById("savePrayer").onclick=()=>{const val=document.getElementById("prayerInput").value.trim();if(val){const s=loadState();s.prayers.push({title:val,answered:false,response:""});saveState(s);renderList("prayerList",s.prayers,"prayers");document.getElementById("prayerInput").value="";}};
document.getElementById("saveThanks").onclick=()=>{const val=document.getElementById("thanksInput").value.trim();if(val){const s=loadState();s.thanks.push(val);saveState(s);renderList("thanksList",s.thanks,"thanks");document.getElementById("thanksInput").value="";}};
</script>
</body>
</html>
